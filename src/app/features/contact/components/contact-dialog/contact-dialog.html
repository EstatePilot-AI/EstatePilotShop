<p-dialog
  header="Contact Us"
  [(visible)]="visible"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [style]="{ width: '30rem' }"
  [breakpoints]="{ '500px': '90vw' }"
  styleClass="contact-dialog"
  (onShow)="onDialogShow()"
>
  <form [formGroup]="contactForm" (ngSubmit)="submit()" class="contact-form">
    <!-- Name -->
    <div class="form-field">
      <label for="cd-name">Name</label>
      <input
        pInputText
        id="cd-name"
        formControlName="name"
        placeholder="Your full name"
        aria-label="Your full name"
      />
      @if (contactForm.get('name')!.touched && contactForm.get('name')!.hasError('required')) {
        <small class="form-error">Name is required.</small>
      }
      @if (contactForm.get('name')!.touched && contactForm.get('name')!.hasError('minlength')) {
        <small class="form-error">Name must be at least 2 characters.</small>
      }
    </div>

    <!-- Phone -->
    <div class="form-field">
      <label for="cd-phone">Phone</label>
      <input
        pInputText
        id="cd-phone"
        formControlName="phone"
        placeholder="+201012345678"
        aria-label="Your phone number"
      />
      @if (contactForm.get('phone')!.touched && contactForm.get('phone')!.hasError('required')) {
        <small class="form-error">Phone is required.</small>
      }
      @if (contactForm.get('phone')!.touched && contactForm.get('phone')!.hasError('pattern')) {
        <small class="form-error">Enter a valid phone number (10â€“15 digits).</small>
      }
    </div>

    <!-- Confirm Phone -->
    <div class="form-field">
      <label for="cd-confirm-phone">Confirm Phone</label>
      <input
        pInputText
        id="cd-confirm-phone"
        formControlName="confirmPhone"
        placeholder="Re-enter your phone"
        aria-label="Confirm your phone number"
      />
      @if (contactForm.get('confirmPhone')!.touched && contactForm.get('confirmPhone')!.hasError('required')) {
        <small class="form-error">Please confirm your phone number.</small>
      }
      @if (contactForm.get('confirmPhone')!.touched && contactForm.get('confirmPhone')!.hasError('phoneMismatch')) {
        <small class="form-error">Phone numbers do not match.</small>
      }
    </div>

    <!-- Email -->
    <div class="form-field">
      <label for="cd-email">Email</label>
      <input
        pInputText
        id="cd-email"
        formControlName="email"
        placeholder="you@example.com"
        aria-label="Your email address"
      />
      @if (contactForm.get('email')!.touched && contactForm.get('email')!.hasError('required')) {
        <small class="form-error">Email is required.</small>
      }
      @if (contactForm.get('email')!.touched && contactForm.get('email')!.hasError('email')) {
        <small class="form-error">Enter a valid email address.</small>
      }
    </div>

    <!-- Confirm Email -->
    <div class="form-field">
      <label for="cd-confirm-email">Confirm Email</label>
      <input
        pInputText
        id="cd-confirm-email"
        formControlName="confirmEmail"
        placeholder="Re-enter your email"
        aria-label="Confirm your email address"
      />
      @if (contactForm.get('confirmEmail')!.touched && contactForm.get('confirmEmail')!.hasError('required')) {
        <small class="form-error">Please confirm your email address.</small>
      }
      @if (contactForm.get('confirmEmail')!.touched && contactForm.get('confirmEmail')!.hasError('email')) {
        <small class="form-error">Enter a valid email address.</small>
      }
      @if (contactForm.get('confirmEmail')!.touched && contactForm.get('confirmEmail')!.hasError('emailMismatch')) {
        <small class="form-error">Email addresses do not match.</small>
      }
    </div>

    <!-- Actions -->
    <div class="dialog-actions">
      <p-button
        label="Cancel"
        [outlined]="true"
        severity="secondary"
        (onClick)="visible.set(false)"
        type="button"
      />
      <p-button
        label="Send"
        icon="pi pi-send"
        iconPos="right"
        type="submit"
        [loading]="submitting()"
        [disabled]="submitting()"
      />
    </div>
  </form>
</p-dialog>

<p-toast />
